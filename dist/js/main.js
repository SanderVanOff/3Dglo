(()=>{"use strict";const e=({timing:e,draw:t,duration:s})=>{let o=performance.now();requestAnimationFrame((function a(l){let r=(l-o)/s;r>1&&(r=1);let n=e(r);t(n),r<1&&requestAnimationFrame(a)}))},t=e=>{document.querySelector(e.hash).scrollIntoView({behavior:"smooth",block:"start"})},s=({idForm:e})=>{const t=document.querySelector(e),s=(t.querySelectorAll("input"),document.createElement("div"));s.style.color="#fff";try{t.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=t.querySelectorAll("input"),o=new FormData(t),a={};var l;o.forEach(((e,t)=>{a[t]=e})),(e=>{let t=!0;return e.forEach((e=>{e.classList.contains("success")||(t=!1)})),t})(e)?(s.innerHTML='\n    <div class="spinner-border text-primary mt-3" role="status">\n        <span class="sr-only">Loading...</span>\n    </div>',t.append(s),e.forEach((e=>{e.disabled=!0,e.style.background="rgba(255,255,255,0.9)"})),(l=a,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((()=>{s.innerHTML="",s.textContent="Спасибо. Наш менеджер свяжется с вами!",e.forEach((e=>{e.disabled=!1,e.style.background="",e.value="",e.classList.remove("success"),e.style.outline=""})),setTimeout((()=>{s.remove()}),5e3)})).catch((e=>{console.log(e),s.innerHTML="",s.textContent="Oшибка"}))):alert("Данные не валидны, либо не заполнены все поля")})()}))}catch(e){console.log(e.message)}};(e=>{const t=document.querySelector("#timer-hours"),s=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");let a;a=setInterval((()=>{const e=(()=>{let e=(new Date("14 january 2022").getTime()-(new Date).getTime())/1e3;return{hour:Math.floor(e/60/60),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60),timeRemaining:e}})(),{hour:l,minutes:r,seconds:n,timeRemaining:c}=e;t.textContent=l<10?`0${l}`:l,s.textContent=r<10?`0${r}`:r,o.textContent=n<10?`0${n}`:n,c<0&&(clearInterval(a),t.textContent="00",s.textContent="00",o.textContent="00")}),1e3)})(),(()=>{const e=document.querySelector("menu"),s=document.querySelector('a[href="#service-block"]'),o=()=>{e.classList.toggle("active-menu")};document.addEventListener("click",(a=>{try{a.target.closest(".close-btn")||a.target.closest(".menu")?(a.preventDefault(),o()):a.target.matches("ul > li > a")?(a.preventDefault(),t(a.target.closest("a")),o()):s===a.target.closest("a")?(a.preventDefault(),t(s)):a.target!==e&&e.classList.contains("active-menu")&&o()}catch(e){console.log(e)}}))})(),(()=>{const t=document.querySelectorAll(".popup-btn"),s=document.querySelector(".popup"),o=()=>{s.style.transform="scale(0)",s.style.transition="all 0.3s ease-in-out",s.style.opacity="0","block"!==s.style.display?(s.style.display="block",e({duration:100,timing:e=>e,draw(e){s.style.opacity=`${e}`,s.style.transform=`scale(${e})`}})):e({duration:100,timing:e=>e,draw(e){s.style.transform="scale(0)",s.style.opacity="0",setTimeout((()=>{s.style.display="none"}),200)}})};t.forEach((e=>{e.addEventListener("click",(()=>{document.documentElement.clientWidth>768?o():(s.style.transform="scale(1)",s.style.opacity="1",s.style.display="block")}))})),s.addEventListener("click",(e=>{e.target.closest(".popup-content")&&!e.target.classList.contains("popup-close")||(document.documentElement.clientWidth>768?o():s.style.display="none")}))})(),((t=100)=>{const s=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),a=document.querySelector(".calc-square"),l=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),n=document.querySelector("#total");document.querySelectorAll(".calc-block > input").forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D/gi,"")}))})),s.addEventListener("change",(s=>{(()=>{const s=+o.options[o.selectedIndex].value,c=a.value;let i=0,u=1,d=1;l.value>1&&(u+=+l.value/10),r.value&&r.value<5?d=2:r.value&&r.value<10&&(d=1.5),o.value&&a.value?(i=t*s*c*u*d,e({duration:500,timing:e=>Math.pow(e,4),draw(e){n.textContent=Math.round(e*i)}})):i=0})()}))})(100),(()=>{const e=document.querySelectorAll("form"),t=(e,t)=>{"success"===t&&""!==e.value?(e.classList.add(t),e.style.outline="2px solid #28a745"):"success"!==t&&""!==e.value?(e.classList.remove("success"),e.style.outline="2px solid #dc3545"):(e.classList.remove("success"),e.style.outline="")};e.forEach((e=>{e.querySelectorAll("input").forEach((e=>{"text"===e.type||"Ваше сообщение"===e.placeholder?e.addEventListener("blur",(s=>{/[^а-яА-ЯёЁ0-9 -]/gi.test(s.target.value)?(t(s.target,"error"),e.setCustomValidity("допустима только кириллица")):(t(s.target,"success"),e.setCustomValidity(""))})):"email"===e.type?e.addEventListener("blur",(e=>{if(/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/.test(e.target.value)){t(e.target,"success");const s=[];e.target.value.replace(/([^(a-z0-9) \.\@\-\_])/gi,(t=>{s.push(t),s.length&&(e.target.value=s.join(""))}))}else t(e.target,"error")})):"tel"===e.type&&e.addEventListener("blur",(s=>{/[^0-9\+ \-\(\)]/gi.test(s.target.value)?(t(s.target,"error"),e.setCustomValidity("разрешены цифры, знак “+”, круглые скобки и дефис")):(t(s.target,"success"),e.setCustomValidity(""),s.target.value.replace(/([7-8]{1})([0-9]{3})([0-9]{3})([0-9]{2})([0-9]{2})/gi,((e,t,o,a,l,r)=>{s.target.value=`+7 (${o})-${a}-${l}-${r}`})))}))}))}))})(),(()=>{const e=document.querySelectorAll(".service-tab"),t=document.querySelector(".service-header"),s=document.querySelectorAll(".service-header-tab");t.addEventListener("click",(t=>{if(t.target.closest(".service-header-tab")){const o=t.target.closest(".service-header-tab");s.forEach(((t,s)=>{t===o?(t.classList.add("active"),e[s].classList.remove("d-none")):(t.classList.remove("active"),e[s].classList.add("d-none"))}))}}))})(),(({sliderContent:e,sliderBtnsClass:t,nextSlideBtn:s,prevSlideBtn:o,sliderItemClass:a,dotsContentClass:l,dotClass:r,dotActiveClass:n="dot-active",slideActiveClass:c="portfolio-item-active",timer:i})=>{if(!e||!a)return;const u=document.querySelector(`.${e}`),d=document.querySelectorAll(`.${a}`),m=document.querySelector(`.${l}`);let v,y,p=0;const g=(e,t,s)=>{e[t].classList.remove(s)},h=(e,t,s)=>{e[t].classList.add(s)},f=()=>{g(d,p,c),g(v,p,n),p++,p>=d.length&&(p=0),h(d,p,c),h(v,p,n)},L=(e=2e3)=>{y=setInterval(f,e)};u.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(`.${r}, .${t}`)&&(g(d,p,c),g(v,p,n),e.target.matches(s)?p++:e.target.matches(o)?p--:e.target.classList.contains(r)&&v.forEach(((t,s)=>{e.target===t&&(p=s)})),p>=d.length&&(p=0),p<0&&(p=d.length-1),h(d,p,c),h(v,p,n))})),u.addEventListener("mouseenter",(e=>{e.target.matches(`.${r}, .${t}`)&&clearInterval(y)}),!0),u.addEventListener("mouseleave",(e=>{e.target.matches(`.${r}, .${t}`)&&L(i)}),!0),d.forEach((()=>{const e=document.createElement("li");e.classList.add(r),m.append(e)})),v=document.querySelectorAll(`.${r}`),v[p].classList.add(n),L(i)})({sliderContent:"portfolio-content",sliderItemClass:"portfolio-item",sliderBtnsClass:"portfolio-btn",nextSlideBtn:"#arrow-right",prevSlideBtn:"#arrow-left",slideActiveClass:"portfolio-item-active",dotsContentClass:"portfolio-dots",dotClass:"dot",dotActiveClass:"dot-active",timer:3e3}),s({idForm:"#form1"}),s({idForm:"#form2"}),s({idForm:"#form3"})})();